# =============================================================================
# Environment Configuration Example
# =============================================================================
# Copy this file to .env and update with your actual values
# Never commit .env to version control!

# =============================================================================
# Application Configuration
# =============================================================================
NODE_ENV=development
PORT=3000
LOG_LEVEL=info

# =============================================================================
# Database Configuration
# =============================================================================
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=travel_db
# Alternative: Use DATABASE_URL instead of individual POSTGRES_* variables
# DATABASE_URL=postgresql://user:password@localhost:5432/travel_db

# =============================================================================
# Redis Configuration
# =============================================================================
REDIS_HOST=localhost
REDIS_PORT=6379
# REDIS_PASSWORD=

# =============================================================================
# Queue Configuration
# =============================================================================
QUEUE_CONCURRENCY=5

# =============================================================================
# Conversations Configuration
# =============================================================================
CREATE_DEFAULT_CONVERSATION=true

# =============================================================================
# Security Configuration
# =============================================================================
CORS_ORIGINS=http://localhost:3000,http://localhost:5173
RATE_LIMIT_TTL=60
RATE_LIMIT_MAX=100

# =============================================================================
# JWT Authentication
# =============================================================================
# IMPORTANT: Generate strong, random secrets (minimum 32 characters)
# You can generate secrets using: openssl rand -base64 32
JWT_SECRET=your-super-secret-jwt-key-minimum-32-characters-long-change-this
JWT_REFRESH_SECRET=your-super-secret-refresh-key-minimum-32-characters-long-change-this
JWT_ACCESS_EXPIRATION=1h
JWT_REFRESH_EXPIRATION=7d
JWT_ISSUER=travel-service
JWT_AUDIENCE=travel-service-users

# =============================================================================
# LLM Provider Configuration
# =============================================================================
LLM_PROVIDER=openai

# =============================================================================
# OpenAI Configuration (New Preferred Format)
# =============================================================================
# Get your API key from: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-your-openai-api-key-here
OPENAI_BASE_URL=https://api.openai.com/v1
OPENAI_CHAT_MODEL=gpt-4o-mini
OPENAI_EMBED_MODEL=text-embedding-3-small
OPENAI_TIMEOUT_MS=60000
OPENAI_MAX_RETRIES=2
# Optional: For organization/project management
# OPENAI_PROJECT_ID=
# OPENAI_ORG_ID=

# =============================================================================
# Model Routing - Chat Modes
# =============================================================================
# Override default models for specific chat modes
# If not set, will use OPENAI_CHAT_MODEL or defaults below
# OPENAI_CHAT_MODEL_DEFAULT=gpt-4o-mini    # Default chat mode
# OPENAI_CHAT_MODEL_SUMMARY=gpt-4o-mini    # Summarization mode
# OPENAI_CHAT_MODEL_PLANNING=gpt-4o        # Planning mode (itinerary creation)

# =============================================================================
# Model Routing - Job Types
# =============================================================================
# Override default models for specific job types
# If not set, will use defaults below
# JOB_MODEL_RESEARCH_HOTEL=gpt-4o           # Hotel research jobs
# JOB_MODEL_RESEARCH_FOOD=gpt-4o-mini       # Food/restaurant research jobs
# JOB_MODEL_RESEARCH_ATTRACTION=gpt-4o-mini # Attraction research jobs
# JOB_MODEL_MEMORY_COMPRESSION=gpt-4o-mini  # Memory compression jobs

# =============================================================================
# LLM Configuration (Legacy - Backward Compatibility)
# =============================================================================
# These are kept for backward compatibility but OPENAI_* variables are preferred
# LLM_API_KEY=sk-your-openai-api-key-here
# LLM_MODEL=gpt-4o-mini
# LLM_EMBED_MODEL=text-embedding-3-small
# LLM_TIMEOUT_MS=60000
# LLM_MAX_RETRIES=2
# LLM_BASE_URL=https://api.openai.com/v1

# =============================================================================
# Vector Search Configuration
# =============================================================================
VECTOR_SEARCH_MODE=hnsw
VECTOR_HNSW_M=16
VECTOR_HNSW_EF_CONSTRUCTION=64

# =============================================================================
# Memory Compression Configuration
# =============================================================================
MEMORY_COMPRESSION_ENABLED=true
# Cron expression for compression schedule (Daily at 2 AM)
MEMORY_COMPRESSION_INTERVAL=0 2 * * *
# Trigger compression when embeddings exceed this count
MEMORY_ARCHIVE_THRESHOLD=1000
# Default compression mode: "light" or "full"
MEMORY_COMPRESSION_DEFAULT_MODE=light
# Optional: Similarity threshold for compression (0.0 to 1.0)
# MEMORY_COMPRESSION_SIMILARITY=0.7
# Optional: Days to retain memories before archiving
# MEMORY_RETENTION_DAYS=90
# Days of inactivity before compression runs
MEMORY_INACTIVE_PLAN_DAYS=30
# Minimum embeddings required before compression runs
MEMORY_COMPRESSION_MIN_EMBEDDINGS_THRESHOLD=50
# Number of recent embeddings to preserve during compression
MEMORY_COMPRESSION_PRESERVE_RECENT_COUNT=20
# Days to consider a conversation active (prevents compression)
MEMORY_COMPRESSION_ACTIVE_CONVERSATION_DAYS=7

# =============================================================================
# Context Builder Configuration
# =============================================================================
# Maximum tokens for context building
CONTEXT_BUILDER_MAX_TOKENS=8000
# Maximum number of messages to include in context
CONTEXT_BUILDER_MESSAGE_LIMIT=20
# Number of top similar embeddings to retrieve
CONTEXT_BUILDER_EMBEDDING_TOP_K=10
# Similarity threshold for embedding search (0.0 to 1.0)
CONTEXT_BUILDER_EMBEDDING_THRESHOLD=0.7
# Maximum number of jobs to include in context
CONTEXT_BUILDER_JOB_LIMIT=5
# Character threshold for considering a message "long"
CONTEXT_BUILDER_LONG_MESSAGE_THRESHOLD=500
